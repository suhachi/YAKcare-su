# âœ… ì˜¤ë¥˜ ìˆ˜ì • ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì—… ì¼ì‹œ**: 2025ë…„ 11ì›” 5ì¼  
**ì˜¤ë¥˜**: 
1. `require is not defined` (doses.service.ts)
2. PostCSS Tailwind v4 í”ŒëŸ¬ê·¸ì¸ ì˜¤ë¥˜
**ìƒíƒœ**: âœ… **í•´ê²° ì™„ë£Œ**

---

## ğŸ“Š ë°œê²¬ëœ ì˜¤ë¥˜

### 1. `require is not defined` ì˜¤ë¥˜
**ìœ„ì¹˜**: `src/services/doses.service.ts`

**ë¬¸ì œ**:
- `require()` í•¨ìˆ˜ ì‚¬ìš© (CommonJS ë°©ì‹)
- ESM ëª¨ë“ˆì—ì„œëŠ” `require`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ

**ë°œìƒ ìœ„ì¹˜**:
- ë¼ì¸ 261: `const { getSupabaseClient } = require('../utils/supabase/client');`
- ë¼ì¸ 370: `const { subscribeDoseChange } = require('./dose.mock');`

### 2. PostCSS Tailwind v4 ì˜¤ë¥˜
**ìœ„ì¹˜**: `postcss.config.js`

**ë¬¸ì œ**:
- `tailwindcss`ë¥¼ ì§ì ‘ PostCSS í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì‚¬ìš©
- Tailwind v4ì—ì„œëŠ” `@tailwindcss/postcss` íŒ¨í‚¤ì§€ ì‚¬ìš© í•„ìš”

---

## âœ… í•´ê²° ë°©ë²•

### 1. doses.service.ts ìˆ˜ì •

#### ë³€ê²½ ì „
```typescript
function subscribeWithSupabase(listener: () => void): () => void {
  const { getSupabaseClient } = require('../utils/supabase/client');
  const supabase = getSupabaseClient();
  // ...
}

function subscribeWithMock(listener: () => void): () => void {
  const { subscribeDoseChange } = require('./dose.mock');
  return subscribeDoseChange(listener);
}
```

#### ë³€ê²½ í›„
```typescript
// íŒŒì¼ ìƒë‹¨ì— import ì¶”ê°€
import { getSupabaseClient } from '../utils/supabase/client';
import { subscribeDoseChange as subscribeDoseChangeMock } from './dose.mock';

function subscribeWithSupabase(listener: () => void): () => void {
  const supabase = getSupabaseClient();  // ì§ì ‘ ì‚¬ìš©
  // ...
}

function subscribeWithMock(listener: () => void): () => void {
  return subscribeDoseChangeMock(listener);  // importëœ í•¨ìˆ˜ ì‚¬ìš©
}
```

### 2. postcss.config.js ìˆ˜ì •

#### ë³€ê²½ ì „
```javascript
export default {
  plugins: {
    tailwindcss: {},      // âŒ Tailwind v3 ë°©ì‹
    autoprefixer: {},
  },
};
```

#### ë³€ê²½ í›„
```javascript
export default {
  plugins: {
    '@tailwindcss/postcss': {},  // âœ… Tailwind v4 ë°©ì‹
    autoprefixer: {},
  },
};
```

---

## ğŸ“‹ ìˆ˜ì •ëœ íŒŒì¼

### 1. src/services/doses.service.ts
- âœ… `require` â†’ `import`ë¡œ ë³€ê²½
- âœ… íŒŒì¼ ìƒë‹¨ì— import ì¶”ê°€
- âœ… í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì§ì ‘ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •

### 2. postcss.config.js
- âœ… `tailwindcss` â†’ `@tailwindcss/postcss`ë¡œ ë³€ê²½
- âœ… Tailwind v4 í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©

---

## ğŸ¯ í•´ê²°ëœ ì˜¤ë¥˜

### 1. require is not defined
- âœ… ESM ëª¨ë“ˆ í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°
- âœ… `HomeToday.tsx` ì˜¤ë¥˜ í•´ì†Œ
- âœ… React ì»´í¬ë„ŒíŠ¸ ì˜¤ë¥˜ í•´ì†Œ

### 2. PostCSS Tailwind ì˜¤ë¥˜
- âœ… Tailwind v4 í”ŒëŸ¬ê·¸ì¸ ì„¤ì • ìˆ˜ì •
- âœ… CSS ë¹Œë“œ ì˜¤ë¥˜ í•´ì†Œ
- âœ… `globals.css` ì •ìƒ ë¡œë“œ

---

## âœ… í™•ì¸ ì‚¬í•­

### ê°œë°œ ì„œë²„ ì¬ì‹œì‘ í›„
1. **ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨**
2. **ì½˜ì†” í™•ì¸**:
   - âœ… `require is not defined` ì˜¤ë¥˜ ì—†ìŒ
   - âœ… PostCSS ì˜¤ë¥˜ ì—†ìŒ
   - âœ… React ì»´í¬ë„ŒíŠ¸ ì˜¤ë¥˜ ì—†ìŒ

### ê¸°ëŒ€ ê²°ê³¼
- âœ… ì•± ì •ìƒ ë Œë”ë§
- âœ… HomeToday ì»´í¬ë„ŒíŠ¸ ì •ìƒ ë™ì‘
- âœ… CSS ìŠ¤íƒ€ì¼ ì •ìƒ ì ìš©

---

## ğŸ“Š ë³€ê²½ ì‚¬í•­ ìš”ì•½

### Import ì¶”ê°€
```typescript
import { getSupabaseClient } from '../utils/supabase/client';
import { subscribeDoseChange as subscribeDoseChangeMock } from './dose.mock';
```

### require ì œê±°
- âŒ `require('../utils/supabase/client')`
- âŒ `require('./dose.mock')`

### PostCSS í”ŒëŸ¬ê·¸ì¸ ë³€ê²½
- âŒ `tailwindcss: {}`
- âœ… `'@tailwindcss/postcss': {}`

---

**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 5ì¼  
**ìƒíƒœ**: âœ… í•´ê²° ì™„ë£Œ



